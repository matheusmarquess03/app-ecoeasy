// Update movimentation using firebase and Printing movimentation
function tracking(firebase_reference_access, elementId, imagePath) {
  var lat = '-22.5273041'
  var lng = '-41.9463158'

  var myCoords = new google.maps.LatLng(lat, lng);

  var mapOptions = {
    center: myCoords,
    zoom: 15
  };

  var map = new google.maps.Map(document.getElementById(elementId), mapOptions);

  var icon = {
    url: imagePath
  };

  var marker = new google.maps.Marker({
    position: myCoords,
    map: map,
    icon: icon
  });

  var polyOptions = {
    strokeColor: '#000000',
    strokeOpacity: 1.0,
    strokeWeight: 3
  };

  var poly = new google.maps.Polyline(polyOptions);
  poly.setMap(map);

  firebase.database().ref(firebase_reference_access).once('value').then(function(snapshot) {
    if (snapshot.val() == null) {
      marker.setMap(null);
      marker.setVisible(false);
    }
  });

  firebase.database().ref(firebase_reference_access).on('child_added', function(snapshot) {
    var path = poly.getPath();
    var latLng = new google.maps.LatLng(snapshot.val().latitude, snapshot.val().longitude)

    path.push(latLng);
    marker.setPosition(latLng);
    map.setCenter(marker.getPosition());
  });
}
